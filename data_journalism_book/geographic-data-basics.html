<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 20 Geographic data basics | Data Journalism with R and the Tidyverse</title>
  <meta name="description" content="This is a book built on a very opinionated philosophy for journalism students doing data journalism in R with replicable methods." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 20 Geographic data basics | Data Journalism with R and the Tidyverse" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a book built on a very opinionated philosophy for journalism students doing data journalism in R with replicable methods." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 20 Geographic data basics | Data Journalism with R and the Tidyverse" />
  
  <meta name="twitter:description" content="This is a book built on a very opinionated philosophy for journalism students doing data journalism in R with replicable methods." />
  

<meta name="author" content="Matt Waite (original author); updated by Derek Willis and Sean Mussenden" />


<meta name="date" content="2021-11-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="visualizing-your-data-for-publication.html"/>
<link rel="next" href="geographic-analysis.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-160712129-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-160712129-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="http://smussenden.github.io/coursefiles/data_journalism_book/">Data Journalism With R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#modern-data-journalism"><i class="fa fa-check"></i><b>1.1</b> Modern data journalism</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#installations"><i class="fa fa-check"></i><b>1.2</b> Installations</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#about-this-book"><i class="fa fa-check"></i><b>1.3</b> About this book</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#what-well-cover"><i class="fa fa-check"></i><b>1.4</b> What we’ll cover</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="public-records.html"><a href="public-records.html"><i class="fa fa-check"></i><b>2</b> Public records</a>
<ul>
<li class="chapter" data-level="2.1" data-path="public-records.html"><a href="public-records.html#federal-law"><i class="fa fa-check"></i><b>2.1</b> Federal law</a></li>
<li class="chapter" data-level="2.2" data-path="public-records.html"><a href="public-records.html#state-law"><i class="fa fa-check"></i><b>2.2</b> State law</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>3</b> R basics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-basics.html"><a href="r-basics.html#about-libraries"><i class="fa fa-check"></i><b>3.1</b> About libraries</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-journalism-in-the-age-of-replication.html"><a href="data-journalism-in-the-age-of-replication.html"><i class="fa fa-check"></i><b>4</b> Data journalism in the age of replication</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-journalism-in-the-age-of-replication.html"><a href="data-journalism-in-the-age-of-replication.html#the-stylebook"><i class="fa fa-check"></i><b>4.1</b> The stylebook</a></li>
<li class="chapter" data-level="4.2" data-path="data-journalism-in-the-age-of-replication.html"><a href="data-journalism-in-the-age-of-replication.html#replication"><i class="fa fa-check"></i><b>4.2</b> Replication</a></li>
<li class="chapter" data-level="4.3" data-path="data-journalism-in-the-age-of-replication.html"><a href="data-journalism-in-the-age-of-replication.html#goodbye-excel"><i class="fa fa-check"></i><b>4.3</b> Goodbye Excel?</a></li>
<li class="chapter" data-level="4.4" data-path="data-journalism-in-the-age-of-replication.html"><a href="data-journalism-in-the-age-of-replication.html#receptivity-is-high"><i class="fa fa-check"></i><b>4.4</b> “Receptivity … is high”</a></li>
<li class="chapter" data-level="4.5" data-path="data-journalism-in-the-age-of-replication.html"><a href="data-journalism-in-the-age-of-replication.html#replication-in-notebooks"><i class="fa fa-check"></i><b>4.5</b> Replication in notebooks</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-structures-and-types.html"><a href="data-structures-and-types.html"><i class="fa fa-check"></i><b>5</b> Data, structures and types</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-structures-and-types.html"><a href="data-structures-and-types.html#a-mental-picture"><i class="fa fa-check"></i><b>5.1</b> A Mental Picture</a></li>
<li class="chapter" data-level="5.2" data-path="data-structures-and-types.html"><a href="data-structures-and-types.html#types"><i class="fa fa-check"></i><b>5.2</b> Types</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="aggregates.html"><a href="aggregates.html"><i class="fa fa-check"></i><b>6</b> Aggregates</a>
<ul>
<li class="chapter" data-level="6.1" data-path="aggregates.html"><a href="aggregates.html#libraries"><i class="fa fa-check"></i><b>6.1</b> Libraries</a></li>
<li class="chapter" data-level="6.2" data-path="aggregates.html"><a href="aggregates.html#importing-data"><i class="fa fa-check"></i><b>6.2</b> Importing data</a></li>
<li class="chapter" data-level="6.3" data-path="aggregates.html"><a href="aggregates.html#group-by-and-count"><i class="fa fa-check"></i><b>6.3</b> Group by and count</a></li>
<li class="chapter" data-level="6.4" data-path="aggregates.html"><a href="aggregates.html#other-summarization-methods-summing-mean-median-min-and-max"><i class="fa fa-check"></i><b>6.4</b> Other summarization methods: summing, mean, median, min and max</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="mutating-data.html"><a href="mutating-data.html"><i class="fa fa-check"></i><b>7</b> Mutating data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="mutating-data.html"><a href="mutating-data.html#another-use-of-mutate"><i class="fa fa-check"></i><b>7.1</b> Another use of mutate</a></li>
<li class="chapter" data-level="7.2" data-path="mutating-data.html"><a href="mutating-data.html#a-more-powerful-use"><i class="fa fa-check"></i><b>7.2</b> A more powerful use</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="working-with-dates.html"><a href="working-with-dates.html"><i class="fa fa-check"></i><b>8</b> Working with dates</a>
<ul>
<li class="chapter" data-level="8.1" data-path="working-with-dates.html"><a href="working-with-dates.html#the-hard-way"><i class="fa fa-check"></i><b>8.1</b> The hard way</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="filters-and-selections.html"><a href="filters-and-selections.html"><i class="fa fa-check"></i><b>9</b> Filters and selections</a>
<ul>
<li class="chapter" data-level="9.1" data-path="filters-and-selections.html"><a href="filters-and-selections.html#combining-filters"><i class="fa fa-check"></i><b>9.1</b> Combining filters</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-cleaning-part-i-data-smells.html"><a href="data-cleaning-part-i-data-smells.html"><i class="fa fa-check"></i><b>10</b> Data Cleaning Part I: Data smells</a>
<ul>
<li class="chapter" data-level="10.1" data-path="data-cleaning-part-i-data-smells.html"><a href="data-cleaning-part-i-data-smells.html#wrong-type"><i class="fa fa-check"></i><b>10.1</b> Wrong Type</a></li>
<li class="chapter" data-level="10.2" data-path="data-cleaning-part-i-data-smells.html"><a href="data-cleaning-part-i-data-smells.html#missing-data"><i class="fa fa-check"></i><b>10.2</b> Missing Data</a></li>
<li class="chapter" data-level="10.3" data-path="data-cleaning-part-i-data-smells.html"><a href="data-cleaning-part-i-data-smells.html#gaps-in-data"><i class="fa fa-check"></i><b>10.3</b> Gaps in data</a></li>
<li class="chapter" data-level="10.4" data-path="data-cleaning-part-i-data-smells.html"><a href="data-cleaning-part-i-data-smells.html#supicious-outliers"><i class="fa fa-check"></i><b>10.4</b> Supicious Outliers</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="data-cleaning-part-ii-janitor.html"><a href="data-cleaning-part-ii-janitor.html"><i class="fa fa-check"></i><b>11</b> Data Cleaning Part II: Janitor</a>
<ul>
<li class="chapter" data-level="11.1" data-path="data-cleaning-part-ii-janitor.html"><a href="data-cleaning-part-ii-janitor.html#cleaning-headers"><i class="fa fa-check"></i><b>11.1</b> Cleaning headers</a></li>
<li class="chapter" data-level="11.2" data-path="data-cleaning-part-ii-janitor.html"><a href="data-cleaning-part-ii-janitor.html#changing-data-types"><i class="fa fa-check"></i><b>11.2</b> Changing data types</a></li>
<li class="chapter" data-level="11.3" data-path="data-cleaning-part-ii-janitor.html"><a href="data-cleaning-part-ii-janitor.html#duplicates"><i class="fa fa-check"></i><b>11.3</b> Duplicates</a></li>
<li class="chapter" data-level="11.4" data-path="data-cleaning-part-ii-janitor.html"><a href="data-cleaning-part-ii-janitor.html#cleaning-strings"><i class="fa fa-check"></i><b>11.4</b> Cleaning strings</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="data-cleaning-part-iii-open-refine.html"><a href="data-cleaning-part-iii-open-refine.html"><i class="fa fa-check"></i><b>12</b> Data Cleaning Part III: Open Refine</a>
<ul>
<li class="chapter" data-level="12.1" data-path="data-cleaning-part-iii-open-refine.html"><a href="data-cleaning-part-iii-open-refine.html#refinr-open-refine-in-r"><i class="fa fa-check"></i><b>12.1</b> Refinr, Open Refine in R</a></li>
<li class="chapter" data-level="12.2" data-path="data-cleaning-part-iii-open-refine.html"><a href="data-cleaning-part-iii-open-refine.html#manually-cleaning-data-with-open-refine"><i class="fa fa-check"></i><b>12.2</b> Manually cleaning data with Open Refine</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="cleaning-data-part-iv-pdfs.html"><a href="cleaning-data-part-iv-pdfs.html"><i class="fa fa-check"></i><b>13</b> Cleaning Data Part IV: PDFs</a>
<ul>
<li class="chapter" data-level="13.1" data-path="cleaning-data-part-iv-pdfs.html"><a href="cleaning-data-part-iv-pdfs.html#easy-does-it"><i class="fa fa-check"></i><b>13.1</b> Easy does it</a></li>
<li class="chapter" data-level="13.2" data-path="cleaning-data-part-iv-pdfs.html"><a href="cleaning-data-part-iv-pdfs.html#when-it-looks-good-but-needs-a-little-fixing"><i class="fa fa-check"></i><b>13.2</b> When it looks good, but needs a little fixing</a></li>
<li class="chapter" data-level="13.3" data-path="cleaning-data-part-iv-pdfs.html"><a href="cleaning-data-part-iv-pdfs.html#cleaning-up-the-data-in-r"><i class="fa fa-check"></i><b>13.3</b> Cleaning up the data in R</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="combining-and-joining.html"><a href="combining-and-joining.html"><i class="fa fa-check"></i><b>14</b> Combining and joining</a>
<ul>
<li class="chapter" data-level="14.1" data-path="combining-and-joining.html"><a href="combining-and-joining.html#combining-data-stacking"><i class="fa fa-check"></i><b>14.1</b> Combining data (stacking)</a></li>
<li class="chapter" data-level="14.2" data-path="combining-and-joining.html"><a href="combining-and-joining.html#joining-data"><i class="fa fa-check"></i><b>14.2</b> Joining data</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="scraping-data-with-rvest.html"><a href="scraping-data-with-rvest.html"><i class="fa fa-check"></i><b>15</b> Scraping data with Rvest</a></li>
<li class="chapter" data-level="16" data-path="advanced-rvest.html"><a href="advanced-rvest.html"><i class="fa fa-check"></i><b>16</b> Advanced rvest</a>
<ul>
<li class="chapter" data-level="16.1" data-path="advanced-rvest.html"><a href="advanced-rvest.html#using-for-loops"><i class="fa fa-check"></i><b>16.1</b> Using for loops</a></li>
<li class="chapter" data-level="16.2" data-path="advanced-rvest.html"><a href="advanced-rvest.html#looping-and-rvest"><i class="fa fa-check"></i><b>16.2</b> Looping and rvest</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="intro-to-apis-the-census.html"><a href="intro-to-apis-the-census.html"><i class="fa fa-check"></i><b>17</b> Intro to APIs: The Census</a>
<ul>
<li class="chapter" data-level="17.1" data-path="intro-to-apis-the-census.html"><a href="intro-to-apis-the-census.html#the-acs"><i class="fa fa-check"></i><b>17.1</b> The ACS</a></li>
<li class="chapter" data-level="17.2" data-path="intro-to-apis-the-census.html"><a href="intro-to-apis-the-census.html#wide-results"><i class="fa fa-check"></i><b>17.2</b> “Wide” Results</a></li>
<li class="chapter" data-level="17.3" data-path="intro-to-apis-the-census.html"><a href="intro-to-apis-the-census.html#sorting-results"><i class="fa fa-check"></i><b>17.3</b> Sorting Results</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="visualizing-your-data-for-reporting.html"><a href="visualizing-your-data-for-reporting.html"><i class="fa fa-check"></i><b>18</b> Visualizing your data for reporting</a>
<ul>
<li class="chapter" data-level="18.1" data-path="visualizing-your-data-for-reporting.html"><a href="visualizing-your-data-for-reporting.html#bar-charts"><i class="fa fa-check"></i><b>18.1</b> Bar charts</a></li>
<li class="chapter" data-level="18.2" data-path="visualizing-your-data-for-reporting.html"><a href="visualizing-your-data-for-reporting.html#line-charts"><i class="fa fa-check"></i><b>18.2</b> Line charts</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="visualizing-your-data-for-publication.html"><a href="visualizing-your-data-for-publication.html"><i class="fa fa-check"></i><b>19</b> Visualizing your data for publication</a>
<ul>
<li class="chapter" data-level="19.1" data-path="visualizing-your-data-for-publication.html"><a href="visualizing-your-data-for-publication.html#datawrapper"><i class="fa fa-check"></i><b>19.1</b> Datawrapper</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="visualizing-your-data-for-publication.html"><a href="visualizing-your-data-for-publication.html#making-a-map"><i class="fa fa-check"></i><b>19.1.1</b> Making a Map</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="geographic-data-basics.html"><a href="geographic-data-basics.html"><i class="fa fa-check"></i><b>20</b> Geographic data basics</a>
<ul>
<li class="chapter" data-level="20.1" data-path="geographic-data-basics.html"><a href="geographic-data-basics.html#importing-and-viewing-data"><i class="fa fa-check"></i><b>20.1</b> Importing and viewing data</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="geographic-analysis.html"><a href="geographic-analysis.html"><i class="fa fa-check"></i><b>21</b> Geographic analysis</a></li>
<li class="chapter" data-level="22" data-path="automating-analysis.html"><a href="automating-analysis.html"><i class="fa fa-check"></i><b>22</b> Automating analysis</a>
<ul>
<li class="chapter" data-level="22.1" data-path="automating-analysis.html"><a href="automating-analysis.html#automating-downloads-and-imports"><i class="fa fa-check"></i><b>22.1</b> Automating downloads and imports</a></li>
<li class="chapter" data-level="22.2" data-path="automating-analysis.html"><a href="automating-analysis.html#exploring-the-data"><i class="fa fa-check"></i><b>22.2</b> Exploring the data</a></li>
<li class="chapter" data-level="22.3" data-path="automating-analysis.html"><a href="automating-analysis.html#analysis"><i class="fa fa-check"></i><b>22.3</b> Analysis</a></li>
<li class="chapter" data-level="22.4" data-path="automating-analysis.html"><a href="automating-analysis.html#making-updating-graphics"><i class="fa fa-check"></i><b>22.4</b> Making updating graphics</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="automating-geographic-analysis.html"><a href="automating-geographic-analysis.html"><i class="fa fa-check"></i><b>23</b> Automating geographic analysis</a>
<ul>
<li class="chapter" data-level="23.1" data-path="automating-geographic-analysis.html"><a href="automating-geographic-analysis.html#mapping-continuously"><i class="fa fa-check"></i><b>23.1</b> Mapping continuously</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="basic-stats-linear-regression-and-the-t-test.html"><a href="basic-stats-linear-regression-and-the-t-test.html"><i class="fa fa-check"></i><b>24</b> Basic Stats: Linear Regression and The T-Test</a></li>
<li class="chapter" data-level="25" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>25</b> Linear Regression</a></li>
<li class="chapter" data-level="26" data-path="t-tests.html"><a href="t-tests.html"><i class="fa fa-check"></i><b>26</b> T-tests</a></li>
<li class="chapter" data-level="27" data-path="an-intro-to-text-analysis.html"><a href="an-intro-to-text-analysis.html"><i class="fa fa-check"></i><b>27</b> An intro to text analysis</a>
<ul>
<li class="chapter" data-level="27.1" data-path="an-intro-to-text-analysis.html"><a href="an-intro-to-text-analysis.html#going-beyond-a-single-word"><i class="fa fa-check"></i><b>27.1</b> Going beyond a single word</a></li>
<li class="chapter" data-level="27.2" data-path="an-intro-to-text-analysis.html"><a href="an-intro-to-text-analysis.html#sentiment-analysis"><i class="fa fa-check"></i><b>27.2</b> Sentiment Analysis</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="writing-with-numbers.html"><a href="writing-with-numbers.html"><i class="fa fa-check"></i><b>28</b> Writing with numbers</a>
<ul>
<li class="chapter" data-level="28.1" data-path="writing-with-numbers.html"><a href="writing-with-numbers.html#how-to-write-about-numbers-without-overwhelming-with-numbers."><i class="fa fa-check"></i><b>28.1</b> How to write about numbers without overwhelming with numbers.</a></li>
<li class="chapter" data-level="28.2" data-path="writing-with-numbers.html"><a href="writing-with-numbers.html#when-exact-numbers-matter"><i class="fa fa-check"></i><b>28.2</b> When exact numbers matter</a></li>
<li class="chapter" data-level="28.3" data-path="writing-with-numbers.html"><a href="writing-with-numbers.html#an-example"><i class="fa fa-check"></i><b>28.3</b> An example</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="ethics-in-data-journalism.html"><a href="ethics-in-data-journalism.html"><i class="fa fa-check"></i><b>29</b> Ethics in data journalism</a>
<ul>
<li class="chapter" data-level="29.1" data-path="ethics-in-data-journalism.html"><a href="ethics-in-data-journalism.html#problems"><i class="fa fa-check"></i><b>29.1</b> Problems</a></li>
<li class="chapter" data-level="29.2" data-path="ethics-in-data-journalism.html"><a href="ethics-in-data-journalism.html#the-googlebot"><i class="fa fa-check"></i><b>29.2</b> The Googlebot</a></li>
<li class="chapter" data-level="29.3" data-path="ethics-in-data-journalism.html"><a href="ethics-in-data-journalism.html#data-lifetimes"><i class="fa fa-check"></i><b>29.3</b> Data Lifetimes</a></li>
<li class="chapter" data-level="29.4" data-path="ethics-in-data-journalism.html"><a href="ethics-in-data-journalism.html#you-are-a-data-provider"><i class="fa fa-check"></i><b>29.4</b> You Are a Data Provider</a></li>
<li class="chapter" data-level="29.5" data-path="ethics-in-data-journalism.html"><a href="ethics-in-data-journalism.html#ethical-data"><i class="fa fa-check"></i><b>29.5</b> Ethical Data</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="using-github.html"><a href="using-github.html"><i class="fa fa-check"></i><b>30</b> Using GitHub</a>
<ul>
<li class="chapter" data-level="30.1" data-path="using-github.html"><a href="using-github.html#how-it-works"><i class="fa fa-check"></i><b>30.1</b> How It Works</a></li>
<li class="chapter" data-level="30.2" data-path="using-github.html"><a href="using-github.html#getting-started"><i class="fa fa-check"></i><b>30.2</b> Getting Started</a></li>
<li class="chapter" data-level="30.3" data-path="using-github.html"><a href="using-github.html#advanced-use"><i class="fa fa-check"></i><b>30.3</b> Advanced Use</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Journalism with R and the Tidyverse</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="geographic-data-basics" class="section level1" number="20">
<h1><span class="header-section-number">Chapter 20</span> Geographic data basics</h1>
<p>Up to now, we’ve been looking at patterns in data for what is more than this, or what’s the middle look like. We’ve calculated metrics like per capita rates, or looked at how data changes over time.</p>
<p>Another way we can look at the data is geographically. Is there a spatial pattern to our data? Can we learn anything by using distance as a metric? What if we merge non-geographic data into geographic data?</p>
<p>The bad news is that there isn’t a One Library To Rule Them All when it comes to geo queries in R. But there’s one emerging, called Simple Features, that is very good.</p>
<p>Go to the console and install it with <code>install.packages("sf")</code></p>
<p>To understand geographic queries, you have to get a few things in your head first:</p>
<ol style="list-style-type: decimal">
<li>Your query is using planar space. Usually that’s some kind of projection of the world. If you’re lucky, your data is projected, and the software will handle projection differences under the hood without you knowing anything about it.</li>
<li>Projections are cartographers making opinionated decisions about what the world should look like when you take a spheroid – the earth isn’t perfectly round – and flatten it. Believe it or not, every state in the US has their own geographic projection. There’s dozens upon dozens of them.</li>
<li>Geographic queries work in layers. In most geographic applications, you’ll have multiple layers. You’ll have a boundary file, and a river file, and a road file, and a flood file and combined together they make the map. But you have to think in layers.</li>
<li>See 1. With layers, they’re all joined together by the planar space. So you don’t need to join one to the other like we did earlier – the space has done that. So you can query how many X are within the boundaries on layer Y. And it’s the plane that holds them together.</li>
</ol>
<p><img src="images/geolayers.jpg" /><!-- --></p>
<div id="importing-and-viewing-data" class="section level2" number="20.1">
<h2><span class="header-section-number">20.1</span> Importing and viewing data</h2>
<p>Let’s start with the absolute basics of geographic data: loading and viewing. Load libraries as usual.</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="geographic-data-basics.html#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb363-2"><a href="geographic-data-basics.html#cb363-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code></pre></div>
<pre><code>## Linking to GEOS 3.8.1, GDAL 3.2.1, PROJ 7.2.1</code></pre>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="geographic-data-basics.html#cb365-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span></code></pre></div>
<p>First: an aside on geographic data. There are many formats for geographic data, but data type you’ll see the most is called the shapefile. It comes from a company named ERSI, which created the most widely used GIS software in the world. For years, they were the only game in town, really, and the shapefile became ubiquitous, especially so in government and utilities.</p>
<p>So more often than not, you’ll be dealing with a shapefile. But a shapefile isn’t just a single file – it’s a collection of files that combined make up all the data that allow you to use it. There’s a .shp file – that’s the main file that pulls it all together – but it’s important to note if your shapefiles has a .prj file, which indicates that the projection is specified.</p>
<p>The data we’re going to be working with is a file from the Department of Homeland Security that is every hospital in the US and the number of beds they have. I’m writing this during the days of coronavirus, and suddenly the number of hospital beds is a top concern. So let’s look at where hospital beds are and how many of them are there.</p>
<p>When you do, it should look something like this:</p>
<p><img src="images/geolayers2.png" /><!-- --></p>
<p>Simlar to <code>readr</code>, the <code>sf</code> library has functions to read geographic data. In this case, we’re going to use <code>st_read</code> to read in our hospitals data. And then glimpse it to look at the columns.</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="geographic-data-basics.html#cb366-1" aria-hidden="true" tabindex="-1"></a>hospitals <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;data/Hospitals/Hospitals.shp&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `Hospitals&#39; from data source 
##   `/Users/derekwillis/code/datajournalismbook/data/Hospitals/Hospitals.shp&#39; 
##   using driver `ESRI Shapefile&#39;
## Simple feature collection with 7581 features and 32 fields
## Geometry type: POINT
## Dimension:     XY
## Bounding box:  xmin: -176.6403 ymin: -14.29024 xmax: 145.7245 ymax: 71.29285
## Geodetic CRS:  WGS 84</code></pre>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="geographic-data-basics.html#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(hospitals)</span></code></pre></div>
<pre><code>## Rows: 7,581
## Columns: 33
## $ OBJECTID   &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, …
## $ ID         &lt;chr&gt; &quot;0005793230&quot;, &quot;0053391362&quot;, &quot;0011190023&quot;, &quot;0017090028&quot;, &quot;00…
## $ NAME       &lt;chr&gt; &quot;CENTRAL VALLEY GENERAL HOSPITAL&quot;, &quot;LOS ROBLES HOSPITAL &amp; M…
## $ ADDRESS    &lt;chr&gt; &quot;1025 NORTH DOUTY STREET&quot;, &quot;150 VIA MERIDA&quot;, &quot;4060 WHITTIER…
## $ CITY       &lt;chr&gt; &quot;HANFORD&quot;, &quot;WESTLAKE VILAGE&quot;, &quot;LOS ANGELES&quot;, &quot;HOLLYWOOD&quot;, &quot;…
## $ STATE      &lt;chr&gt; &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;,…
## $ ZIP        &lt;chr&gt; &quot;93230&quot;, &quot;91362&quot;, &quot;90023&quot;, &quot;90028&quot;, &quot;91706&quot;, &quot;90712&quot;, &quot;9101…
## $ ZIP4       &lt;chr&gt; &quot;NOT AVAILABLE&quot;, &quot;NOT AVAILABLE&quot;, &quot;NOT AVAILABLE&quot;, &quot;NOT AVA…
## $ TELEPHONE  &lt;chr&gt; &quot;NOT AVAILABLE&quot;, &quot;NOT AVAILABLE&quot;, &quot;NOT AVAILABLE&quot;, &quot;(323) 4…
## $ TYPE       &lt;chr&gt; &quot;GENERAL ACUTE CARE&quot;, &quot;GENERAL ACUTE CARE&quot;, &quot;GENERAL ACUTE …
## $ STATUS     &lt;chr&gt; &quot;CLOSED&quot;, &quot;OPEN&quot;, &quot;OPEN&quot;, &quot;OPEN&quot;, &quot;OPEN&quot;, &quot;OPEN&quot;, &quot;OPEN&quot;, &quot;…
## $ POPULATION &lt;dbl&gt; 49, 62, 127, 100, 95, 172, 49, 101, 16, 78, 87, 269, 42, 27…
## $ COUNTY     &lt;chr&gt; &quot;KINGS&quot;, &quot;VENTURA&quot;, &quot;LOS ANGELES&quot;, &quot;LOS ANGELES&quot;, &quot;LOS ANGE…
## $ COUNTYFIPS &lt;chr&gt; &quot;06031&quot;, &quot;06111&quot;, &quot;06037&quot;, &quot;06037&quot;, &quot;06037&quot;, &quot;06037&quot;, &quot;0603…
## $ COUNTRY    &lt;chr&gt; &quot;USA&quot;, &quot;USA&quot;, &quot;USA&quot;, &quot;USA&quot;, &quot;USA&quot;, &quot;USA&quot;, &quot;USA&quot;, &quot;USA&quot;, &quot;US…
## $ LATITUDE   &lt;dbl&gt; 36.33616, 34.15494, 34.02365, 34.09639, 34.06304, 33.85971,…
## $ LONGITUDE  &lt;dbl&gt; -119.64567, -118.81574, -118.18416, -118.32523, -117.96744,…
## $ NAICS_CODE &lt;chr&gt; &quot;622110&quot;, &quot;622110&quot;, &quot;622110&quot;, &quot;622110&quot;, &quot;622110&quot;, &quot;622110&quot;,…
## $ NAICS_DESC &lt;chr&gt; &quot;GENERAL MEDICAL AND SURGICAL HOSPITALS&quot;, &quot;GENERAL MEDICAL …
## $ SOURCE     &lt;chr&gt; &quot;http://www.oshpd.ca.gov/HID/Facility-Listing.html&quot;, &quot;http:…
## $ SOURCEDATE &lt;chr&gt; &quot;2016-02-04T00:00:00.000Z&quot;, &quot;2018-08-08T00:00:00.000Z&quot;, &quot;20…
## $ VAL_METHOD &lt;chr&gt; &quot;IMAGERY/OTHER&quot;, &quot;IMAGERY/OTHER&quot;, &quot;IMAGERY/OTHER&quot;, &quot;IMAGERY…
## $ VAL_DATE   &lt;chr&gt; &quot;2014-02-10T00:00:00.000Z&quot;, &quot;2014-02-10T00:00:00.000Z&quot;, &quot;20…
## $ WEBSITE    &lt;chr&gt; &quot;http://www.hanfordhealth.com&quot;, &quot;http://www.losrobleshospit…
## $ STATE_ID   &lt;chr&gt; &quot;NOT AVAILABLE&quot;, &quot;NOT AVAILABLE&quot;, &quot;NOT AVAILABLE&quot;, &quot;NOT AVA…
## $ ALT_NAME   &lt;chr&gt; &quot;NOT AVAILABLE&quot;, &quot;NOT AVAILABLE&quot;, &quot;NOT AVAILABLE&quot;, &quot;HOLLYWO…
## $ ST_FIPS    &lt;chr&gt; &quot;06&quot;, &quot;06&quot;, &quot;06&quot;, &quot;06&quot;, &quot;06&quot;, &quot;06&quot;, &quot;06&quot;, &quot;06&quot;, &quot;06&quot;, &quot;06&quot;,…
## $ OWNER      &lt;chr&gt; &quot;PROPRIETARY&quot;, &quot;PROPRIETARY&quot;, &quot;PROPRIETARY&quot;, &quot;PROPRIETARY&quot;,…
## $ TTL_STAFF  &lt;dbl&gt; -999, -999, -999, -999, -999, -999, -999, -999, -999, -999,…
## $ BEDS       &lt;dbl&gt; 49, 62, 127, 100, 95, 172, 49, 101, 16, 78, 87, 269, 42, 27…
## $ TRAUMA     &lt;chr&gt; &quot;NOT AVAILABLE&quot;, &quot;NOT AVAILABLE&quot;, &quot;NOT AVAILABLE&quot;, &quot;NOT AVA…
## $ HELIPAD    &lt;chr&gt; &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;Y&quot;, &quot;N&quot;,…
## $ geometry   &lt;POINT [°]&gt; POINT (-119.6457 36.33616), POINT (-118.8157 34.15494…</code></pre>
<p>This looks like a normal dataframe, and mostly it is. We have one row per hospital, and each column is some feature of that hospital: the name, the address, it’s open/closed status and more. What sets this data apart from other dataframes we’ve used is the last column, “geometry,” which is of a new data type. It’s not a character or a number, it’s a “POINT,” which is composed of a longitude value and a latitude value. When we plot these on a grid of latitude and longitude, it will place a point where those two numbers intersect.</p>
<p>Let’s look at just Maryland hospitals. Good news – <code>sf</code> plays very nicely with the tidyverse, so we can filter data the way we are accustomed.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="geographic-data-basics.html#cb370-1" aria-hidden="true" tabindex="-1"></a>md_hospitals <span class="ot">&lt;-</span> hospitals <span class="sc">%&gt;%</span> </span>
<span id="cb370-2"><a href="geographic-data-basics.html#cb370-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(STATE <span class="sc">==</span> <span class="st">&quot;MD&quot;</span>)</span>
<span id="cb370-3"><a href="geographic-data-basics.html#cb370-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb370-4"><a href="geographic-data-basics.html#cb370-4" aria-hidden="true" tabindex="-1"></a>md_hospitals</span></code></pre></div>
<pre><code>## Simple feature collection with 72 features and 32 fields
## Geometry type: POINT
## Dimension:     XY
## Bounding box:  xmin: -79.40098 ymin: 37.99756 xmax: -75.21133 ymax: 39.677
## Geodetic CRS:  WGS 84
## First 10 features:
##    OBJECTID         ID
## 1       234 0003120785
## 2       364 0000921287
## 3       365 0001021205
## 4       366 0002321202
## 5       367 0003721215
## 6       368 0004121201
## 7       370 0004821224
## 8       397 0003421740
## 9       404 0003521742
## 10      443 0001920910
##                                                          NAME
## 1  GLADYS SPELLMAN SPECIALTY HOSPITAL AND NURSING CARE CENTER
## 2                                      JOHNS HOPKINS HOSPITAL
## 3                                   KENNEDY KREIGER INSTITUTE
## 4                                        MERCY MEDICAL CENTER
## 5                                 SINAI HOSPITAL OF BALTIMORE
## 6                       UNIVERSITY OF MARYLAND MEDICAL CENTER
## 7                        JOHNS HOPKINS BAYVIEW MEDICAL CENTER
## 8                                  BROOK LANE HEALTH SERVICES
## 9                                      MERITUS MEDICAL CENTER
## 10                                        HOLY CROSS HOSPITAL
##                      ADDRESS          CITY STATE   ZIP          ZIP4
## 1        3001 HOSPITAL DRIVE   HYATTSVILLE    MD 20785 NOT AVAILABLE
## 2    600 NORTH  WOLFE STREET     BALTIMORE    MD 21287 NOT AVAILABLE
## 3             707 N BROADWAY     BALTIMORE    MD 21205 NOT AVAILABLE
## 4          301 ST PAUL PLACE     BALTIMORE    MD 21202 NOT AVAILABLE
## 5    2401 WEST BELVEDERE AVE     BALTIMORE    MD 21215 NOT AVAILABLE
## 6             22 S GREENE ST     BALTIMORE    MD 21201 NOT AVAILABLE
## 7        4940 EASTERN AVENUE     BALTIMORE    MD 21224 NOT AVAILABLE
## 8     13218 BROOK LANE DRIVE    HAGERSTOWN    MD 21740 NOT AVAILABLE
## 9  11116 MEDICAL CAMPUS ROAD    HAGERSTOWN    MD 21742 NOT AVAILABLE
## 10     1500 FOREST GLEN ROAD SILVER SPRING    MD 20910 NOT AVAILABLE
##         TELEPHONE               TYPE STATUS POPULATION          COUNTY
## 1  (301) 497-7953    CHRONIC DISEASE CLOSED         30 PRINCE GEORGE&#39;S
## 2  (410) 955-9540 GENERAL ACUTE CARE   OPEN        951  BALTIMORE CITY
## 3  (443) 923-9305 GENERAL ACUTE CARE   OPEN         70  BALTIMORE CITY
## 4  (410) 332-9237 GENERAL ACUTE CARE   OPEN        281  BALTIMORE CITY
## 5  (410) 601-5131 GENERAL ACUTE CARE   OPEN        467  BALTIMORE CITY
## 6  (410) 328-8667 GENERAL ACUTE CARE   OPEN        800  BALTIMORE CITY
## 7  (410) 550-0123 GENERAL ACUTE CARE   OPEN        477  BALTIMORE CITY
## 8  (301) 733-0330        PSYCHIATRIC   OPEN         65      WASHINGTON
## 9  (240) 313-9500 GENERAL ACUTE CARE   OPEN        247      WASHINGTON
## 10 (301) 754-7000 GENERAL ACUTE CARE   OPEN        409      MONTGOMERY
##    COUNTYFIPS COUNTRY LATITUDE LONGITUDE NAICS_CODE
## 1       24033     USA 38.93088 -76.92156     622110
## 2       24510     USA 39.29611 -76.59197     622110
## 3       24510     USA 39.29928 -76.59282     622110
## 4       24510     USA 39.29292 -76.61288     622110
## 5       24510     USA 39.35230 -76.66209     622110
## 6       24510     USA 39.28791 -76.62493     622110
## 7       24510     USA 39.29068 -76.54678     622110
## 8       24043     USA 39.67700 -77.61060     622110
## 9       24043     USA 39.62219 -77.68256     622110
## 10      24031     USA 39.01472 -77.03574     622110
##                                NAICS_DESC
## 1  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 2  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 3  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 4  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 5  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 6  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 7  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 8  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 9  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 10 GENERAL MEDICAL AND SURGICAL HOSPITALS
##                                                          SOURCE
## 1  http://dhmh.maryland.gov/ohcq/docs/Forms/DispForm.aspx?ID=89
## 2   http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 3   http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 4   http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 5   http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 6   http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 7   http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 8   http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 9   http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 10  http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
##                  SOURCEDATE    VAL_METHOD                 VAL_DATE
## 1  2012-10-25T00:00:00.000Z       IMAGERY 2014-03-12T00:00:00.000Z
## 2  2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
## 3  2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
## 4  2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
## 5  2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
## 6  2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
## 7  2018-08-09T00:00:00.000Z IMAGERY/OTHER 2014-02-10T00:00:00.000Z
## 8  2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
## 9  2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
## 10 2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
##                                                                                        WEBSITE
## 1                                                              http://www.dimensionshealth.org
## 2                                                               http://www.hopkinsmedicine.org
## 3                                                                http://www.kennedykrieger.org
## 4                                                                       http://www.mdmercy.com
## 5                                            http://www.lifebridgehealth.org/Sinai/Sinai1.aspx
## 6                                                       http://www.umms.org/hospitals/ummc.htm
## 7                                                                http://www.hopkinsbayview.org
## 8                                                                     http://www.brooklane.org
## 9  http://www.meritushealth.com/For-Hospital-Patients-and-Visitors/Meritus-Medical-Center.aspx
## 10                                                              http://www.holycrosshealth.org
##         STATE_ID      ALT_NAME ST_FIPS       OWNER TTL_STAFF BEDS
## 1  NOT AVAILABLE NOT AVAILABLE      24 PROPRIETARY      -999   30
## 2  NOT AVAILABLE NOT AVAILABLE      24  NON-PROFIT      -999  951
## 3  NOT AVAILABLE NOT AVAILABLE      24  NON-PROFIT      -999   70
## 4  NOT AVAILABLE NOT AVAILABLE      24  NON-PROFIT      -999  281
## 5  NOT AVAILABLE NOT AVAILABLE      24  NON-PROFIT      -999  467
## 6  NOT AVAILABLE NOT AVAILABLE      24  NON-PROFIT      -999  800
## 7  NOT AVAILABLE NOT AVAILABLE      24  NON-PROFIT      -999  477
## 8  NOT AVAILABLE NOT AVAILABLE      24  NON-PROFIT      -999   65
## 9  NOT AVAILABLE NOT AVAILABLE      24  NON-PROFIT      -999  247
## 10 NOT AVAILABLE NOT AVAILABLE      24  NON-PROFIT      -999  409
##                      TRAUMA HELIPAD                   geometry
## 1             NOT AVAILABLE       Y POINT (-76.92156 38.93088)
## 2  LEVEL I, LEVEL PEDIATRIC       Y POINT (-76.59197 39.29611)
## 3             NOT AVAILABLE       Y POINT (-76.59282 39.29928)
## 4             NOT AVAILABLE       N POINT (-76.61288 39.29292)
## 5                  LEVEL II       Y  POINT (-76.66209 39.3523)
## 6                      PARC       Y POINT (-76.62493 39.28791)
## 7                  LEVEL II       Y POINT (-76.54678 39.29068)
## 8             NOT AVAILABLE       N    POINT (-77.6106 39.677)
## 9                 LEVEL III       Y POINT (-77.68256 39.62219)
## 10            NOT AVAILABLE       N POINT (-77.03574 39.01472)</code></pre>
<p>We have 72 hospitals, according to this data.</p>
<p>What kind of hospitals do we have?</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="geographic-data-basics.html#cb372-1" aria-hidden="true" tabindex="-1"></a>md_hospitals <span class="sc">%&gt;%</span></span>
<span id="cb372-2"><a href="geographic-data-basics.html#cb372-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TYPE) <span class="sc">%&gt;%</span></span>
<span id="cb372-3"><a href="geographic-data-basics.html#cb372-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb372-4"><a href="geographic-data-basics.html#cb372-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">count=</span><span class="fu">n</span>()</span>
<span id="cb372-5"><a href="geographic-data-basics.html#cb372-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb372-6"><a href="geographic-data-basics.html#cb372-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(count))</span></code></pre></div>
<pre><code>## Simple feature collection with 7 features and 2 fields
## Geometry type: GEOMETRY
## Dimension:     XY
## Bounding box:  xmin: -79.40098 ymin: 37.99756 xmax: -75.21133 ymax: 39.677
## Geodetic CRS:  WGS 84
## # A tibble: 7 x 3
##   TYPE           count                                                  geometry
##   &lt;chr&gt;          &lt;int&gt;                                            &lt;GEOMETRY [°]&gt;
## 1 GENERAL ACUTE…    50 MULTIPOINT ((-79.40098 39.41344), (-77.24226 39.18068), …
## 2 PSYCHIATRIC       11 MULTIPOINT ((-77.19896 39.09986), (-76.98002 39.00257), …
## 3 MILITARY           4 MULTIPOINT ((-77.09359 39.00129), (-76.06292 39.54994), …
## 4 CHRONIC DISEA…     2    MULTIPOINT ((-76.92156 38.93088), (-75.59572 38.3823))
## 5 LONG TERM CARE     2   MULTIPOINT ((-76.66465 39.35458), (-77.71631 39.66243))
## 6 REHABILITATION     2   MULTIPOINT ((-77.20068 39.09859), (-75.54862 38.36924))
## 7 SPECIAL            1                                POINT (-76.80099 39.37272)</code></pre>
<p>Let’s narrow our data to only look at the 50 “General Acute Care hospitals.”</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="geographic-data-basics.html#cb374-1" aria-hidden="true" tabindex="-1"></a>md_hospitals <span class="ot">&lt;-</span> hospitals <span class="sc">%&gt;%</span> </span>
<span id="cb374-2"><a href="geographic-data-basics.html#cb374-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(STATE <span class="sc">==</span> <span class="st">&quot;MD&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb374-3"><a href="geographic-data-basics.html#cb374-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TYPE <span class="sc">==</span> <span class="st">&quot;GENERAL ACUTE CARE&quot;</span>)</span>
<span id="cb374-4"><a href="geographic-data-basics.html#cb374-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb374-5"><a href="geographic-data-basics.html#cb374-5" aria-hidden="true" tabindex="-1"></a>md_hospitals</span></code></pre></div>
<pre><code>## Simple feature collection with 50 features and 32 fields
## Geometry type: POINT
## Dimension:     XY
## Bounding box:  xmin: -79.40098 ymin: 37.99756 xmax: -75.21133 ymax: 39.64783
## Geodetic CRS:  WGS 84
## First 10 features:
##    OBJECTID         ID                                     NAME
## 1       364 0000921287                   JOHNS HOPKINS HOSPITAL
## 2       365 0001021205                KENNEDY KREIGER INSTITUTE
## 3       366 0002321202                     MERCY MEDICAL CENTER
## 4       367 0003721215              SINAI HOSPITAL OF BALTIMORE
## 5       368 0004121201    UNIVERSITY OF MARYLAND MEDICAL CENTER
## 6       370 0004821224     JOHNS HOPKINS BAYVIEW MEDICAL CENTER
## 7       404 0003521742                   MERITUS MEDICAL CENTER
## 8       443 0001920910                      HOLY CROSS HOSPITAL
## 9       446 0002520744                 FORT WASHINGTON HOSPITAL
## 10      473 0004521502 WESTERN MARYLAND REGIONAL MEDICAL CENTER
##                      ADDRESS            CITY STATE   ZIP          ZIP4
## 1    600 NORTH  WOLFE STREET       BALTIMORE    MD 21287 NOT AVAILABLE
## 2             707 N BROADWAY       BALTIMORE    MD 21205 NOT AVAILABLE
## 3          301 ST PAUL PLACE       BALTIMORE    MD 21202 NOT AVAILABLE
## 4    2401 WEST BELVEDERE AVE       BALTIMORE    MD 21215 NOT AVAILABLE
## 5             22 S GREENE ST       BALTIMORE    MD 21201 NOT AVAILABLE
## 6        4940 EASTERN AVENUE       BALTIMORE    MD 21224 NOT AVAILABLE
## 7  11116 MEDICAL CAMPUS ROAD      HAGERSTOWN    MD 21742 NOT AVAILABLE
## 8      1500 FOREST GLEN ROAD   SILVER SPRING    MD 20910 NOT AVAILABLE
## 9      11711 LIVINGSTON ROAD FORT WASHINGTON    MD 20744 NOT AVAILABLE
## 10    12500 WILLOWBROOK ROAD      CUMBERLAND    MD 21502 NOT AVAILABLE
##         TELEPHONE               TYPE STATUS POPULATION          COUNTY
## 1  (410) 955-9540 GENERAL ACUTE CARE   OPEN        951  BALTIMORE CITY
## 2  (443) 923-9305 GENERAL ACUTE CARE   OPEN         70  BALTIMORE CITY
## 3  (410) 332-9237 GENERAL ACUTE CARE   OPEN        281  BALTIMORE CITY
## 4  (410) 601-5131 GENERAL ACUTE CARE   OPEN        467  BALTIMORE CITY
## 5  (410) 328-8667 GENERAL ACUTE CARE   OPEN        800  BALTIMORE CITY
## 6  (410) 550-0123 GENERAL ACUTE CARE   OPEN        477  BALTIMORE CITY
## 7  (240) 313-9500 GENERAL ACUTE CARE   OPEN        247      WASHINGTON
## 8  (301) 754-7000 GENERAL ACUTE CARE   OPEN        409      MONTGOMERY
## 9  (301) 292-7000 GENERAL ACUTE CARE   OPEN         37 PRINCE GEORGE&#39;S
## 10 (240) 964-2196 GENERAL ACUTE CARE   OPEN        371        ALLEGANY
##    COUNTYFIPS COUNTRY LATITUDE LONGITUDE NAICS_CODE
## 1       24510     USA 39.29611 -76.59197     622110
## 2       24510     USA 39.29928 -76.59282     622110
## 3       24510     USA 39.29292 -76.61288     622110
## 4       24510     USA 39.35230 -76.66209     622110
## 5       24510     USA 39.28791 -76.62493     622110
## 6       24510     USA 39.29068 -76.54678     622110
## 7       24043     USA 39.62219 -77.68256     622110
## 8       24031     USA 39.01472 -77.03574     622110
## 9       24033     USA 38.72856 -76.99270     622110
## 10      24001     USA 39.64783 -78.73324     622110
##                                NAICS_DESC
## 1  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 2  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 3  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 4  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 5  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 6  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 7  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 8  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 9  GENERAL MEDICAL AND SURGICAL HOSPITALS
## 10 GENERAL MEDICAL AND SURGICAL HOSPITALS
##                                                         SOURCE
## 1  http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 2  http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 3  http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 4  http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 5  http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 6  http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 7  http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 8  http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 9  http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
## 10 http://dhmh.maryland.gov/ohcq/pages/licensee-directory.aspx
##                  SOURCEDATE    VAL_METHOD                 VAL_DATE
## 1  2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
## 2  2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
## 3  2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
## 4  2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
## 5  2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
## 6  2018-08-09T00:00:00.000Z IMAGERY/OTHER 2014-02-10T00:00:00.000Z
## 7  2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
## 8  2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
## 9  2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
## 10 2018-08-09T00:00:00.000Z       IMAGERY 2014-02-10T00:00:00.000Z
##                                                                                        WEBSITE
## 1                                                               http://www.hopkinsmedicine.org
## 2                                                                http://www.kennedykrieger.org
## 3                                                                       http://www.mdmercy.com
## 4                                            http://www.lifebridgehealth.org/Sinai/Sinai1.aspx
## 5                                                       http://www.umms.org/hospitals/ummc.htm
## 6                                                                http://www.hopkinsbayview.org
## 7  http://www.meritushealth.com/For-Hospital-Patients-and-Visitors/Meritus-Medical-Center.aspx
## 8                                                               http://www.holycrosshealth.org
## 9                                                             http://www.fortwashingtonmc.org/
## 10                                                                         http://www.wmhs.com
##         STATE_ID      ALT_NAME ST_FIPS      OWNER TTL_STAFF BEDS
## 1  NOT AVAILABLE NOT AVAILABLE      24 NON-PROFIT      -999  951
## 2  NOT AVAILABLE NOT AVAILABLE      24 NON-PROFIT      -999   70
## 3  NOT AVAILABLE NOT AVAILABLE      24 NON-PROFIT      -999  281
## 4  NOT AVAILABLE NOT AVAILABLE      24 NON-PROFIT      -999  467
## 5  NOT AVAILABLE NOT AVAILABLE      24 NON-PROFIT      -999  800
## 6  NOT AVAILABLE NOT AVAILABLE      24 NON-PROFIT      -999  477
## 7  NOT AVAILABLE NOT AVAILABLE      24 NON-PROFIT      -999  247
## 8  NOT AVAILABLE NOT AVAILABLE      24 NON-PROFIT      -999  409
## 9  NOT AVAILABLE NOT AVAILABLE      24 NON-PROFIT      -999   37
## 10 NOT AVAILABLE NOT AVAILABLE      24 NON-PROFIT      -999  371
##                      TRAUMA HELIPAD                   geometry
## 1  LEVEL I, LEVEL PEDIATRIC       Y POINT (-76.59197 39.29611)
## 2             NOT AVAILABLE       Y POINT (-76.59282 39.29928)
## 3             NOT AVAILABLE       N POINT (-76.61288 39.29292)
## 4                  LEVEL II       Y  POINT (-76.66209 39.3523)
## 5                      PARC       Y POINT (-76.62493 39.28791)
## 6                  LEVEL II       Y POINT (-76.54678 39.29068)
## 7                 LEVEL III       Y POINT (-77.68256 39.62219)
## 8             NOT AVAILABLE       N POINT (-77.03574 39.01472)
## 9             NOT AVAILABLE       Y  POINT (-76.9927 38.72856)
## 10                LEVEL III       Y POINT (-78.73324 39.64783)</code></pre>
<p>That gives us 50 hospitals in Maryland. Where are they?</p>
<p>We can simply plot them on a longitude-latitude grid using ggplot.</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="geographic-data-basics.html#cb376-1" aria-hidden="true" tabindex="-1"></a>md_hospitals <span class="sc">%&gt;%</span></span>
<span id="cb376-2"><a href="geographic-data-basics.html#cb376-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb376-3"><a href="geographic-data-basics.html#cb376-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span> </span>
<span id="cb376-4"><a href="geographic-data-basics.html#cb376-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="datajournalism_files/figure-html/unnamed-chunk-235-1.png" width="672" /></p>
<p>Each point is a hospital. Each hospital has been plotted according to its degrees of longitude and latitude.</p>
<p>If you know anything about the state of Maryland, you can kinda pick out the shape of the state there. The point in the top left is in Western Maryland. The point at the extreme bottom right is on the Eastern Shore. But this map is not exactly ideal. It would help to have a state and county map layered underneath of it, to help make sense of the spatial nature of this data.</p>
<p>This is where layering becomes more clear. First, we want to go out and get another shapefile, this one showing Maryland county outlines.</p>
<p>Instead of loading it from our local machine, like we did above, we’re going to use a package to directly download it from the U.S. Census. The package is called <code>tigris</code> and it’s developed by the same person who made <code>tidycensus</code>.</p>
<p>In the console, install tigris with the install packages function</p>
<p>Then load it:</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="geographic-data-basics.html#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tigris)</span></code></pre></div>
<p>Now, let’s use the counties() function from tigris to pull down a shapefile of all U.S. counties.</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="geographic-data-basics.html#cb378-1" aria-hidden="true" tabindex="-1"></a>counties <span class="ot">&lt;-</span> <span class="fu">counties</span>() </span></code></pre></div>
<pre><code>## 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |                                                                      |   1%
  |                                                                            
  |=                                                                     |   1%
  |                                                                            
  |=                                                                     |   2%
  |                                                                            
  |==                                                                    |   2%
  |                                                                            
  |==                                                                    |   3%
  |                                                                            
  |==                                                                    |   4%
  |                                                                            
  |===                                                                   |   4%
  |                                                                            
  |===                                                                   |   5%
  |                                                                            
  |====                                                                  |   5%
  |                                                                            
  |====                                                                  |   6%
  |                                                                            
  |=====                                                                 |   6%
  |                                                                            
  |=====                                                                 |   7%
  |                                                                            
  |=====                                                                 |   8%
  |                                                                            
  |======                                                                |   8%
  |                                                                            
  |======                                                                |   9%
  |                                                                            
  |=======                                                               |  10%
  |                                                                            
  |=======                                                               |  11%
  |                                                                            
  |========                                                              |  11%
  |                                                                            
  |========                                                              |  12%
  |                                                                            
  |=========                                                             |  12%
  |                                                                            
  |=========                                                             |  13%
  |                                                                            
  |=========                                                             |  14%
  |                                                                            
  |==========                                                            |  14%
  |                                                                            
  |==========                                                            |  15%
  |                                                                            
  |===========                                                           |  16%
  |                                                                            
  |============                                                          |  16%
  |                                                                            
  |============                                                          |  17%
  |                                                                            
  |============                                                          |  18%
  |                                                                            
  |=============                                                         |  18%
  |                                                                            
  |=============                                                         |  19%
  |                                                                            
  |==============                                                        |  20%
  |                                                                            
  |==============                                                        |  21%
  |                                                                            
  |===============                                                       |  21%
  |                                                                            
  |================                                                      |  22%
  |                                                                            
  |================                                                      |  23%
  |                                                                            
  |=================                                                     |  25%
  |                                                                            
  |==================                                                    |  25%
  |                                                                            
  |==================                                                    |  26%
  |                                                                            
  |===================                                                   |  27%
  |                                                                            
  |====================                                                  |  28%
  |                                                                            
  |====================                                                  |  29%
  |                                                                            
  |=====================                                                 |  30%
  |                                                                            
  |=====================                                                 |  31%
  |                                                                            
  |======================                                                |  31%
  |                                                                            
  |=======================                                               |  32%
  |                                                                            
  |=======================                                               |  33%
  |                                                                            
  |========================                                              |  34%
  |                                                                            
  |========================                                              |  35%
  |                                                                            
  |=========================                                             |  35%
  |                                                                            
  |=========================                                             |  36%
  |                                                                            
  |==========================                                            |  36%
  |                                                                            
  |==========================                                            |  37%
  |                                                                            
  |==========================                                            |  38%
  |                                                                            
  |===========================                                           |  38%
  |                                                                            
  |===========================                                           |  39%
  |                                                                            
  |============================                                          |  39%
  |                                                                            
  |============================                                          |  40%
  |                                                                            
  |============================                                          |  41%
  |                                                                            
  |=============================                                         |  41%
  |                                                                            
  |=============================                                         |  42%
  |                                                                            
  |==============================                                        |  42%
  |                                                                            
  |==============================                                        |  43%
  |                                                                            
  |===============================                                       |  44%
  |                                                                            
  |================================                                      |  45%
  |                                                                            
  |================================                                      |  46%
  |                                                                            
  |=================================                                     |  46%
  |                                                                            
  |=================================                                     |  47%
  |                                                                            
  |=================================                                     |  48%
  |                                                                            
  |==================================                                    |  48%
  |                                                                            
  |==================================                                    |  49%
  |                                                                            
  |===================================                                   |  50%
  |                                                                            
  |===================================                                   |  51%
  |                                                                            
  |====================================                                  |  52%
  |                                                                            
  |=====================================                                 |  52%
  |                                                                            
  |=====================================                                 |  53%
  |                                                                            
  |=====================================                                 |  54%
  |                                                                            
  |======================================                                |  54%
  |                                                                            
  |======================================                                |  55%
  |                                                                            
  |=======================================                               |  55%
  |                                                                            
  |=======================================                               |  56%
  |                                                                            
  |========================================                              |  56%
  |                                                                            
  |========================================                              |  57%
  |                                                                            
  |========================================                              |  58%
  |                                                                            
  |=========================================                             |  58%
  |                                                                            
  |=========================================                             |  59%
  |                                                                            
  |==========================================                            |  59%
  |                                                                            
  |==========================================                            |  60%
  |                                                                            
  |==========================================                            |  61%
  |                                                                            
  |===========================================                           |  61%
  |                                                                            
  |===========================================                           |  62%
  |                                                                            
  |============================================                          |  63%
  |                                                                            
  |============================================                          |  64%
  |                                                                            
  |=============================================                         |  64%
  |                                                                            
  |=============================================                         |  65%
  |                                                                            
  |==============================================                        |  65%
  |                                                                            
  |==============================================                        |  66%
  |                                                                            
  |===============================================                       |  67%
  |                                                                            
  |===============================================                       |  68%
  |                                                                            
  |================================================                      |  68%
  |                                                                            
  |================================================                      |  69%
  |                                                                            
  |=================================================                     |  70%
  |                                                                            
  |=================================================                     |  71%
  |                                                                            
  |==================================================                    |  71%
  |                                                                            
  |==================================================                    |  72%
  |                                                                            
  |===================================================                   |  72%
  |                                                                            
  |===================================================                   |  73%
  |                                                                            
  |===================================================                   |  74%
  |                                                                            
  |====================================================                  |  74%
  |                                                                            
  |====================================================                  |  75%
  |                                                                            
  |=====================================================                 |  75%
  |                                                                            
  |=====================================================                 |  76%
  |                                                                            
  |======================================================                |  77%
  |                                                                            
  |=======================================================               |  78%
  |                                                                            
  |=======================================================               |  79%
  |                                                                            
  |========================================================              |  79%
  |                                                                            
  |========================================================              |  80%
  |                                                                            
  |========================================================              |  81%
  |                                                                            
  |=========================================================             |  81%
  |                                                                            
  |=========================================================             |  82%
  |                                                                            
  |==========================================================            |  82%
  |                                                                            
  |==========================================================            |  83%
  |                                                                            
  |==========================================================            |  84%
  |                                                                            
  |===========================================================           |  84%
  |                                                                            
  |===========================================================           |  85%
  |                                                                            
  |============================================================          |  85%
  |                                                                            
  |============================================================          |  86%
  |                                                                            
  |=============================================================         |  87%
  |                                                                            
  |=============================================================         |  88%
  |                                                                            
  |==============================================================        |  88%
  |                                                                            
  |==============================================================        |  89%
  |                                                                            
  |===============================================================       |  89%
  |                                                                            
  |===============================================================       |  90%
  |                                                                            
  |================================================================      |  91%
  |                                                                            
  |================================================================      |  92%
  |                                                                            
  |=================================================================     |  93%
  |                                                                            
  |=================================================================     |  94%
  |                                                                            
  |==================================================================    |  94%
  |                                                                            
  |==================================================================    |  95%
  |                                                                            
  |===================================================================   |  95%
  |                                                                            
  |===================================================================   |  96%
  |                                                                            
  |====================================================================  |  96%
  |                                                                            
  |====================================================================  |  97%
  |                                                                            
  |====================================================================  |  98%
  |                                                                            
  |===================================================================== |  98%
  |                                                                            
  |===================================================================== |  99%
  |                                                                            
  |======================================================================|  99%
  |                                                                            
  |======================================================================| 100%</code></pre>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="geographic-data-basics.html#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(counties)</span></code></pre></div>
<pre><code>## Rows: 3,233
## Columns: 18
## $ STATEFP  &lt;chr&gt; &quot;31&quot;, &quot;53&quot;, &quot;35&quot;, &quot;31&quot;, &quot;31&quot;, &quot;72&quot;, &quot;46&quot;, &quot;48&quot;, &quot;06&quot;, &quot;21&quot;, &quot;…
## $ COUNTYFP &lt;chr&gt; &quot;039&quot;, &quot;069&quot;, &quot;011&quot;, &quot;109&quot;, &quot;129&quot;, &quot;085&quot;, &quot;099&quot;, &quot;327&quot;, &quot;091&quot;…
## $ COUNTYNS &lt;chr&gt; &quot;00835841&quot;, &quot;01513275&quot;, &quot;00933054&quot;, &quot;00835876&quot;, &quot;00835886&quot;, &quot;…
## $ GEOID    &lt;chr&gt; &quot;31039&quot;, &quot;53069&quot;, &quot;35011&quot;, &quot;31109&quot;, &quot;31129&quot;, &quot;72085&quot;, &quot;46099&quot;…
## $ NAME     &lt;chr&gt; &quot;Cuming&quot;, &quot;Wahkiakum&quot;, &quot;De Baca&quot;, &quot;Lancaster&quot;, &quot;Nuckolls&quot;, &quot;L…
## $ NAMELSAD &lt;chr&gt; &quot;Cuming County&quot;, &quot;Wahkiakum County&quot;, &quot;De Baca County&quot;, &quot;Lanca…
## $ LSAD     &lt;chr&gt; &quot;06&quot;, &quot;06&quot;, &quot;06&quot;, &quot;06&quot;, &quot;06&quot;, &quot;13&quot;, &quot;06&quot;, &quot;06&quot;, &quot;06&quot;, &quot;06&quot;, &quot;…
## $ CLASSFP  &lt;chr&gt; &quot;H1&quot;, &quot;H1&quot;, &quot;H1&quot;, &quot;H1&quot;, &quot;H1&quot;, &quot;H1&quot;, &quot;H1&quot;, &quot;H1&quot;, &quot;H1&quot;, &quot;H1&quot;, &quot;…
## $ MTFCC    &lt;chr&gt; &quot;G4020&quot;, &quot;G4020&quot;, &quot;G4020&quot;, &quot;G4020&quot;, &quot;G4020&quot;, &quot;G4020&quot;, &quot;G4020&quot;…
## $ CSAFP    &lt;chr&gt; NA, NA, NA, &quot;339&quot;, NA, &quot;490&quot;, NA, NA, NA, NA, &quot;534&quot;, &quot;352&quot;, N…
## $ CBSAFP   &lt;chr&gt; NA, NA, NA, &quot;30700&quot;, NA, &quot;41980&quot;, &quot;43620&quot;, NA, NA, NA, &quot;22300…
## $ METDIVFP &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ FUNCSTAT &lt;chr&gt; &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;…
## $ ALAND    &lt;dbl&gt; 1477652222, 680962890, 6016819475, 2169270569, 1489645188, 87…
## $ AWATER   &lt;dbl&gt; 10690952, 61582307, 29089486, 22849484, 1718484, 32509, 18198…
## $ INTPTLAT &lt;chr&gt; &quot;+41.9158651&quot;, &quot;+46.2946377&quot;, &quot;+34.3592729&quot;, &quot;+40.7835474&quot;, &quot;…
## $ INTPTLON &lt;chr&gt; &quot;-096.7885168&quot;, &quot;-123.4244583&quot;, &quot;-104.3686961&quot;, &quot;-096.6886584…
## $ geometry &lt;MULTIPOLYGON [°]&gt; MULTIPOLYGON (((-97.01952 4..., MULTIPOLYGON (((…</code></pre>
<p>This looks pretty similar to our hospital shapefile, in that it looked mostly like a normal dataframe with the exception of the new geometry column.</p>
<p>But instead of POINT, this geometry is of the datatype “MULTIPOLYGON.” Points are shape data represented by one pair of longitude or latitude coordinates. Polygons are made up of LOTS of pairs of longitude and latitude coordinates, connected by a boundary line into a complex shape.</p>
<p>If you’ve ever filled in a “connect the dots” picture by drawing lines between points, in order to reveal a hidden shape, then you’re familiar with the concept.</p>
<p>This county shapefile has all 3233 U.S. counties. We only want the Maryland counties, so we’re going to filter the data to only keep Maryland counties. There is no STATE column, but there is a STATEFP column, with each number representing a state. Maryland’s FP number is 24.</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="geographic-data-basics.html#cb382-1" aria-hidden="true" tabindex="-1"></a>md_counties <span class="ot">&lt;-</span> counties <span class="sc">%&gt;%</span></span>
<span id="cb382-2"><a href="geographic-data-basics.html#cb382-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(STATEFP <span class="sc">==</span> <span class="st">&quot;24&quot;</span>)</span></code></pre></div>
<p>To see what this looks like, let’s plot it out with ggplot. We can pretty clearly see the shapes of Maryland counties.</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="geographic-data-basics.html#cb383-1" aria-hidden="true" tabindex="-1"></a>md_counties <span class="sc">%&gt;%</span></span>
<span id="cb383-2"><a href="geographic-data-basics.html#cb383-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb383-3"><a href="geographic-data-basics.html#cb383-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span> </span>
<span id="cb383-4"><a href="geographic-data-basics.html#cb383-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="datajournalism_files/figure-html/unnamed-chunk-239-1.png" width="672" /></p>
<p>With this county map, we can layer our hospital data.</p>
<p>Something to note: The layers are rendered in the order they appear. So the first geom_sf is rendered first. The second geom_sf is rendered ON TOP OF the first one.</p>
<p>We’re also going to change things up a bit to put the datasets we want to display INSIDE of the geom_sf() function, instead of starting with a dataframe. We have two to plot now, so it’s easier this way.</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="geographic-data-basics.html#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb384-2"><a href="geographic-data-basics.html#cb384-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>md_counties) <span class="sc">+</span> </span>
<span id="cb384-3"><a href="geographic-data-basics.html#cb384-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>md_hospitals) <span class="sc">+</span></span>
<span id="cb384-4"><a href="geographic-data-basics.html#cb384-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="datajournalism_files/figure-html/unnamed-chunk-240-1.png" width="672" />
What can we tell from this?</p>
<p>Well, hospitals are clustered around the state’s most populous areas, the Baltimore to Washington corridor. There are fewer hospitals in rural Eastern and Western counties. And two counties have no hospital at all.</p>
<p>This is a pretty blunt visualization. Not all hospitals are equal. Some have more beds than the others, and bed space is a critical factor in how full hospitals get during COVID-19 surges.</p>
<p>We can get a sense of where the largest hospitals are, by changing the color of the points according to the number of beds. We do this by setting the aesthetic – or aes – to use the BEDS column inside of the geom_sf function. To make the differences easier to see, we’re going to change the fill of the counties white, too, and use a special color palette, viridis magma. We’re also going to make the points slightly bigger.</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="geographic-data-basics.html#cb385-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb385-2"><a href="geographic-data-basics.html#cb385-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>md_counties, <span class="at">fill=</span><span class="st">&quot;white&quot;</span>) <span class="sc">+</span> </span>
<span id="cb385-3"><a href="geographic-data-basics.html#cb385-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>md_hospitals, <span class="fu">aes</span>(<span class="at">color=</span>BEDS), <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb385-4"><a href="geographic-data-basics.html#cb385-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_viridis_b</span>(<span class="at">option=</span><span class="st">&quot;magma&quot;</span>) <span class="sc">+</span> </span>
<span id="cb385-5"><a href="geographic-data-basics.html#cb385-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() </span></code></pre></div>
<p><img src="datajournalism_files/figure-html/unnamed-chunk-241-1.png" width="672" /></p>
<p>With these changes, what else can we make out here? Well, not only are most hospitals clustered in the center of Maryland, the largest ones are too. Rural areas have fewer and typically smaller hospitals.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="visualizing-your-data-for-publication.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="geographic-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/19-geographicbasics.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["datajournalism.pdf", "datajournalism.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
